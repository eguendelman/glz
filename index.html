<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" type="image/png" href="images/icon32.png">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">

    <!-- Avoid caching this page -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <title>GLZ News Redirect</title>
</head>
<body>

    <div align="center">
        <span id="placeholder">LOADING...</span>
        <audio id="audio" width="100%" controls style="display:none;">
            <source src="" type="audio/mpeg">
        </audio>
    </div>

<script src="strftime-min.js"></script>
<script src="main.js"></script>
<script>
    function callback(success, d)
    {
        let audio = document.getElementById("audio");
        let placeholder = document.getElementById("placeholder");
        if(success) {
            audio.style.display = "block";
            //placeholder.style.display = "none";
            placeholder.innerHTML = strftime("%Y/%m/%d @ %H:00", d);
        } else {
            placeholder.innerHTML = "Failed";
        }
    }

    (function() {

        fetch("https://api.bynetcdn.com/Redirector/glz/181005-01_News/PD", {method: 'HEAD', redirect: 'manual'}).then(response => console.log(response.headers));
        
        let el = document.getElementById("audio");
        setAudioSource(el, callback);

    })();

</script>
</body>
</html> 
